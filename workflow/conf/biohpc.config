process {
  executor = 'slurm'
  queue = 'super'
  clusterOptions = '--hold'

  withLabel: trackStart {
    executor = 'local'
  }
  withName: getBag {
    executor = 'local'
  }
  withName: getData {
    executor = 'local'
  }
  withName: parseMetadata {
    executor = 'local'
  }
  withName: trimData {
    queue = 'super'
  }
  withName: getRefInfer {
    executor = 'local'
  }
  withName: downsampleData {
    executor = 'local'
  }
  withName: alignSampleData {
    queue = 'super'
  }
  withName: inferMetadata {
    queue = 'super'
  }
  withName: getRef {
    executor = 'local'
  }
  withName: alignData {
    queue = '256GB,256GBv1'
  }
  withName: dedupData {
    queue = 'super'
  }
  withName: countData {
    queue = 'super'
  }
  withName: makeBigWig {
    queue = 'super'
  }
  withName: fastqc {
    queue = 'super'
  }
  withName: dataQC {
    queue = 'super'
  }
}

singularity {
  enabled = true
  cacheDir = '/project/BICF/BICF_Core/shared/gudmap/singularity_cache/'
}

env {
  http_proxy = 'http://proxy.swmed.edu:3128'
  https_proxy = 'http://proxy.swmed.edu:3128'
  all_proxy = 'http://proxy.swmed.edu:3128'
}
